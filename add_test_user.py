#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –æ—Ç–≤–µ—Ç–∞–º–∏
"""

import asyncio
import json
from bot.database import Database
from bot.config import DATABASE_PATH

async def add_test_user():
    """–î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –æ—Ç–≤–µ—Ç–∞–º–∏"""
    db = Database(DATABASE_PATH)
    await db.init_db()
    
    # –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    test_user = {
        'telegram_id': 123456789,
        'username': 'test_user',
        'first_name': '–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
        'current_step': 5
    }
    
    print("–î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...")
    await db.create_or_update_user(test_user)
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã
    test_answers = [
        {
            'question': '–ö–∞–∫–æ–π —É —Ç–µ–±—è –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã?',
            'answer': '–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å'
        },
        {
            'question': '–ß—Ç–æ —Ç–µ–±—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?',
            'answer': '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏'
        },
        {
            'question': '–ö–∞–∫ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å —Ä–∞–±–æ—Ç–∞—Ç—å?',
            'answer': '–í –∫–æ–º–∞–Ω–¥–µ'
        }
    ]
    
    print("–î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç—ã...")
    await db.update_user_answers(123456789, test_answers)
    
    # –¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥
    test_text = "–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –Ø —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã 3 –≥–æ–¥–∞. –ò–Ω—Ç–µ—Ä–µ—Å—É—é—Å—å –Ω–æ–≤—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ –∏ –ª—é–±–ª—é —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ. –•–æ—á—É —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤ –æ–±–ª–∞—Å—Ç–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞."
    
    print("–î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥...")
    await db.update_user_text_input(123456789, test_text)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç
    print("–î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç...")
    await db.add_chat_message(123456789, "–ü—Ä–∏–≤–µ—Ç! –Ø –ø—Ä–æ—à–µ–ª –æ–ø—Ä–æ—Å", False)
    await db.add_chat_message(123456789, "–ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –æ–∂–∏–¥–∞—Ç—å –æ—Ç–≤–µ—Ç–∞?", False)
    await db.add_chat_message(123456789, "–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.", True)
    
    print("‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω!")
    print("üìã –î–∞–Ω–Ω—ã–µ:")
    print(f"   Telegram ID: {test_user['telegram_id']}")
    print(f"   –ò–º—è: {test_user['first_name']}")
    print(f"   Username: @{test_user['username']}")
    print(f"   –≠—Ç–∞–ø: {test_user['current_step']} (–∑–∞–≤–µ—Ä—à–µ–Ω)")
    print(f"   –û—Ç–≤–µ—Ç–æ–≤: {len(test_answers)}")
    print(f"   –¢–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥: –µ—Å—Ç—å")
    print(f"   –°–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ: 3")
    print("\nüåê –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏: http://localhost:3000")

if __name__ == "__main__":
    asyncio.run(add_test_user())