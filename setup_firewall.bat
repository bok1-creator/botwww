@echo off
echo ============================================================
echo НАСТРОЙКА БРАНДМАУЭРА ДЛЯ TELEGRAM BOT ADMIN
echo ============================================================
echo.
echo Этот скрипт откроет порт 3000 в брандмауэре Windows
echo для доступа к админ-панели с других компьютеров
echo.
echo ВАЖНО: Запустите этот файл от имени администратора!
echo (Правой кнопкой -> Запуск от имени администратора)
echo.
pause

echo.
echo Добавление правила в брандмауэр...
netsh advfirewall firewall add rule name="Telegram Bot Admin Panel" dir=in action=allow protocol=TCP localport=3000

if %errorlevel% equ 0 (
    echo.
    echo ============================================================
    echo УСПЕШНО! Порт 3000 открыт
    echo ============================================================
    echo.
    echo Теперь админ-панель доступна с других компьютеров!
    echo.
    echo Запустите бота: python app.py
    echo Затем откройте на другом компе: http://192.168.0.155:3000
    echo.
) else (
    echo.
    echo ============================================================
    echo ОШИБКА! Не удалось добавить правило
    echo ============================================================
    echo.
    echo Возможные причины:
    echo 1. Скрипт запущен НЕ от имени администратора
    echo 2. Брандмауэр отключен
    echo.
    echo Решение:
    echo - Закройте это окно
    echo - Правой кнопкой на файл setup_firewall.bat
    echo - Выберите "Запуск от имени администратора"
    echo.
)

pause